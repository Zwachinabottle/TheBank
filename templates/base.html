<!DOCTYPE html>
<html lang="en" class="{{ session.get('theme', 'dark') }}-mode">
<head>
    <meta charset="utf-8" />
    <title>{% block title %}{% endblock %}</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --brand: #24bff0;

            --bg: #11191c;
            --bg2: #1a2c32;
            --bg3: #182429;
            --text: #d7e6eb;
            --text-muted: #9db6bd;
            --card: #182429;
            --input-bg: #243238;
            --border: #2e4b52;
        }

        .light-mode {
            --bg: #e7eef2;
            --bg2: #ffffff;
            --bg3: #ffffff;
            --text: #1b1f21;
            --text-muted: #556166;
            --input-bg: #ecf1f3;
            --border: #c7d2d6;
        }
    </style>

    {% block head %}{% endblock %}
</head>

<body style="background: var(--bg); color: var(--text); font-family: 'Inter';">
    {% block content %}{% endblock %}

    <script>
        const toggleBtn = document.getElementById("theme-toggle");

        function applyTheme(theme) {
            if (theme === "light") {
                document.documentElement.classList.remove("dark-mode");
                document.documentElement.classList.add("light-mode");
            } else {
                document.documentElement.classList.remove("light-mode");
                document.documentElement.classList.add("dark-mode");
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            const savedTheme = "{{ session.get('theme', 'dark') }}";
            applyTheme(savedTheme);
        });

        if (toggleBtn) {
            toggleBtn.addEventListener("click", async () => {
                const response = await fetch("/toggle-theme", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" }
                });

                if (response.ok) {
                    const data = await response.json();
                    applyTheme(data.theme);
                }
            });
        }
    </script>
</body>
</html>
